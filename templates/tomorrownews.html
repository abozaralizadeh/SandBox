<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="license" content="MIT License">
    <meta name="copyright" content="Copyright (c) 2024 Abozar Alizadeh">
    <meta name="author" content="Abozar Alizadeh">
    <meta name="description" content="Software using the MIT License.">
    <title>TomorrowNews</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        iframe {
            width: 100%;
            height: 80%;
            border: none;
            background-image: url('static/crumpled_paper.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 8px solid #000000;
            border-top: 8px solid #3498db;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        .control-line {
            width: 100%;
            height: 5%;
            text-align: center;
            margin: 10px 0;
        }

        .control-line button {
            background-color: #a7a7a7;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
        }

        .control-line button:hover {
            background-color: #646464;
        }

        .date-display {
            font-size: 18px;
            margin: 0 20px;
            font-weight: bold;
        }

        @keyframes spin {
            0% {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            100% {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        .scrollable-paragraph {
            height: 15%;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 20px;
            padding-top: 0px;
        }
    </style>

</head>
<html>

<body>

    <!-- Control Line -->
    <div class="control-line">
        <button id="previousBtn">◀</button>
        <span class="date-display" id="currentDate">2025-01-01 00:00</span>
        <button id="nextBtn">▶</button>
    </div>

    <!-- Spinner div -->
    <div class="spinner" id="spinner"></div>

    <!-- Iframe -->
    <iframe src="/tomorrownewscontent" name="newspaper" title="Tomorrow News" onload="hideSpinner()"></iframe>

    <div class="scrollable-paragraph">
        <p><b>Disclaimer:</b>
            This project, is an experimental open-source initiative utilizing LangChain Agents and Azure OpenAI for
            content generation. The source code for this project is available at
            <a href="https://github.com/abozaralizadeh/SandBox">https://github.com/abozaralizadeh/SandBox</a>.

            <b>Important Notice:</b>

            While the project uses real news as a foundation to generate content, all predictions, articles, and
            headlines produced are speculative and generated by AI. These are not based on actual future events and
            should be considered fictional.
            The generated content is intended for experimental, research, and entertainment purposes only. It does not
            reflect real-world events, forecasts, or any factual information about the future.
            Any resemblance to actual events, persons, or entities in the AI-generated content is coincidental and
            should not be interpreted as accurate or reliable information.
            Users are advised not to rely on the content for making decisions or forming opinions about current or
            future events.
            By accessing and using this project, you acknowledge that all generated content is speculative, fictional,
            and for research and experimental exploration of AI-driven predictive content generation.
        </p>
    </div>
    <script>
        // JavaScript to control the date and time
        let currentDate = new Date();  // Start with the current local time
        currentDate.setMinutes(0);
        currentDate.setSeconds(0);
        currentDate.setMilliseconds(0);

        // Function to update the iframe content based on the current date
        function updateIframe() {
            const formattedDate = currentDate.toLocaleString(); // Format: YYYY-MM-DD HH:mm
            document.getElementById("currentDate").textContent = formattedDate;
            const iframe = document.querySelector('iframe');
            iframe.src = `/tomorrownewscontent?datetime=${encodeURIComponent(formattedDate)}`;

            // Enable/Disable the 'next' button based on the current time
            const now = new Date();
            now.setMinutes(0);
            now.setSeconds(0);
            now.setMilliseconds(0);
            if (currentDate >= now) {
                document.getElementById("nextBtn").disabled = true; // Disable if the time is in the future
            } else {
                document.getElementById("nextBtn").disabled = false; // Enable if it's in the present or past
            }
        }

        // Handle the previous button
        document.getElementById("previousBtn").addEventListener("click", function () {
            currentDate.setHours(currentDate.getHours() - 1); // Go back 1 hour
            updateIframe();
        });

        // Handle the next button
        document.getElementById("nextBtn").addEventListener("click", function () {
            currentDate.setHours(currentDate.getHours() + 1); // Go forward 1 hour
            updateIframe();
        });

        // Function to hide the spinner and show the iframe when loaded
        function hideSpinner() {
            document.getElementById('spinner').style.display = 'none';
            document.querySelector('iframe').style.display = 'block';
        }

        function setIframeTransparent() {
            const iframe = document.querySelector('iframe');
            const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;

            // Apply the transparent background style to the iframe content
            iframeDocument.body.style.backgroundColor = "transparent";
            iframeDocument.documentElement.style.backgroundColor = "transparent";
        }

        // Call the function when the iframe is loaded
        document.querySelector('iframe').addEventListener('load', setIframeTransparent);

        // Initialize the iframe content
        updateIframe();
    </script>
</body>

</html>